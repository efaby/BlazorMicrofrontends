@page "/products/details/{id:int}"
@using Products.MicroFrontend.Services
@inject IProductService ProductService
@inject NavigationManager Navigation

<PageTitle>Product Details</PageTitle>

<div class="container">
    @if (product != null)
    {
        <div class="row">
            <div class="col">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="/products">Products</a>
                        </li>
                        <li class="breadcrumb-item active">@product.Name</li>
                    </ol>
                </nav>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body text-center" style="height: 400px;">
                        <i class="bi bi-image" style="font-size: 8rem; color: #ccc;"></i>
                        <p class="text-muted mt-3">Product image</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <h2>@product.Name</h2>
                <p class="text-muted">@product.Category</p>
                <hr />
                <h3 class="text-success">${@product.Price:F2}</h3>
                <p class="mt-3">@product.Description</p>

                <div class="alert alert-info mt-3">
                    <strong>Available stock:</strong> @product.Stock units
                </div>

                <div class="mt-4">
                    <button class="btn btn-primary btn-lg me-2">
                        <i class="bi bi-cart-plus"></i> Add to cart
                    </button>
                    <button class="btn btn-outline-secondary" @onclick="GoBack">
                        <i class="bi bi-arrow-left"></i> Back
                    </button>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-warning">
            Product not found
        </div>
    }
</div>

@code {
    [Parameter]
    public int Id { get; set; }

    private ProductDto? product;

    protected override async Task OnInitializedAsync()
    {
        product = await ProductService.GetProductByIdAsync(Id);
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/products");
    }
}